<%@ page import="model.User" %>
<%@ page session="true" %>
<%
    User user = (User) session.getAttribute("currentUser");
    if (user == null) {
        response.sendRedirect("login.jsp");
        return;
    }
%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
</head>
<body>
    <h2>Welcome, <%= user.getUserName() %>!</h2>

    <% 
        if (user.getProfileImage() != null) {
            String base64Image = java.util.Base64.getEncoder().encodeToString(user.getProfileImage());
    %>
        <img src="data:image/jpeg;base64,<%= base64Image %>" alt="Profile Image" width="150" height="150">
    <% 
        } else {
    %>
        <p>No profile image uploaded.</p>
    <% 
        }
    %>

    <p>Your email: <%= user.getEmail() %></p>
    <p>Your role: <%= user.getRoleID() == 1 ? "Admin" : "User" %></p>
    <a href="../LogoutServlet">Logout</a>

</body>
</html>
