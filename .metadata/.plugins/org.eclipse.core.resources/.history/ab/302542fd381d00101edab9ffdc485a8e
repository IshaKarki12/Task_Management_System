<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<!DOCTYPE html>
<html>
<head>
    <title>My Tasks</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <h2>My Task List</h2>
    <table border="1">
        <tr>
            <th>Task Name</th>
            <th>Status</th>
            <th>Due Date</th>
            <th>Actions</th>
        </tr>
        <!-- Rows dynamically filled later -->
        <tr>
            <td>Task 1</td>
            <td id="status-1">Pending</td> <!-- Status cell -->
            <td>2025-04-30</td>
            <td>
                <!-- Update Status Button -->
                <button onclick="updateStatus('1')">Update Status</button>
            </td>
        </tr>
        <tr>
            <td>Task 2</td>
            <td id="status-2">In Progress</td> <!-- Status cell -->
            <td>2025-05-15</td>
            <td>
                <!-- Update Status Button -->
                <button onclick="updateStatus('2')">Update Status</button>
            </td>
        </tr>
        <!-- Add more rows as needed -->
    </table>
    <a href="user-dashboard.jsp">Back to Dashboard</a>

    <script>
        // Function to handle status update
        function updateStatus(taskId) {
            // Get current status of the task
            const currentStatus = document.getElementById(`status-${taskId}`).innerText;

            // Prompt the user to enter a new status
            const newStatus = prompt("Enter new status (Pending, In Progress, Completed):", currentStatus);
            
            if (newStatus && (newStatus === 'Pending' || newStatus === 'In Progress' || newStatus === 'Completed')) {
                // Update the status in the table
                document.getElementById(`status-${taskId}`).innerText = newStatus;

                // Optionally, you can add a success message or log
                alert(`Task ${taskId} status updated to ${newStatus}`);
            } else {
                alert("Invalid status. Please enter 'Pending', 'In Progress', or 'Completed'.");
            }
        }
    </script>
</body>
</html>
